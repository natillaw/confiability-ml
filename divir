import os
import shutil
import random

# Rutas base
video_dir = r"C:\Users\Natilla\Music\MACHINE LEARNING\data\train_frames"
output_dir = r"C:\Users\Natilla\Music\MACHINE LEARNING\data\test_frames"

train_dir = os.path.join(output_dir, "train_frames")
test_dir = os.path.join(output_dir, "test_frames")

# Proporci√≥n de test
test_ratio = 0.2

# Crear carpetas destino
for clase in ["lie", "truth"]:
    os.makedirs(os.path.join(train_dir, clase), exist_ok=True)
    os.makedirs(os.path.join(test_dir, clase), exist_ok=True)

    clase_path = os.path.join(video_dir, clase)
    archivos = [f for f in os.listdir(clase_path) if f.lower().endswith(".jpg")]
    random.shuffle(archivos)

    n_test = int(len(archivos) * test_ratio)
    test_files = archivos[:n_test]
    train_files = archivos[n_test:]

    # Copiar archivos
    for f in train_files:
        shutil.copy2(os.path.join(clase_path, f), os.path.join(train_dir, clase, f))
    for f in test_files:
        shutil.copy2(os.path.join(clase_path, f), os.path.join(test_dir, clase, f))

    print(f"Clase '{clase}': {len(train_files)} entrenamiento, {len(test_files)} prueba.")
